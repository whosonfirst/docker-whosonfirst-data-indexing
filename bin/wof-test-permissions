#!/bin/sh

# A dumb little tool to test network access for ES and S3 resources.
# In the future it might be more sophisticated but right now it just
# does some stuff and spits to results to STDOUT for validation by
# a human.

GETOPT=`which getopt`

ES_HOST="http://localhost"
ES_PORT="9200"
USAGE=""

ARGS=`${GETOPT} e:h $*`
set -- $ARGS

for i; do
    case "$i" in
        -h  ) 
	      USAGE=1
	      shift; shift;;
	-e  ) ES_HOST=$2
	      shift; shift ;;
	--  ) shift; break ;;
    esac
done

if [ "${USAGE}" = "1" ]
then
    echo "usage: ./wof-test-permissions {OPTIONS}"
    echo "options:"
    echo "...please write me"
    exit 0
fi

echo "# test Elasticsearch"

curl -s ${ES_HOST}:${ES_PORT}

echo "# test S3"

aws s3 ls s3://data.whosonfirst.org/

exit 0
